<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>hw3-3</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <h1 class="center">Another Blackjack</h1>
    <div class="center">
      <div class="cards">
        <img
          alt="card-1"
          height="200"
          src="images/cards/green_back.png"
          id="cone"
        />
        <img
          alt="card-2"
          height="200"
          src="images/cards/green_back.png"
          id="ctwo"
        />
        <img
          alt="card-3"
          height="200"
          src="images/cards/green_back.png"
          id="cthree"
        />
        <p class="center result" id="output">RESULT</p>
        <button onclick="randomCard(cards)">Hit</button>
      </div>
    </div>

    <script>
      function deckBuilder() {
        console.log("Deck Built");
        const values = [
          "A",
          "2",
          "3",
          "4",
          "5",
          "6",
          "7",
          "8",
          "9",
          "10",
          "J",
          "Q",
          "K",
        ];
        const suits = ["H", "D", "S", "C"];
        const cards = [];
        for (let s = 0; s < suits.length; s++) {
          for (let v = 0; v < values.length; v++) {
            const value = values[v];
            const suit = suits[s];
            cards.push({ value, suit });
          }
        }
        return cards;
      }
      const cards = deckBuilder();

      function randomCard(cards) {
        console.log("game played");
        const n = [];
        const s = [];

        for (let i = 0; i < 3; i++) {
          const random = Math.floor(Math.random() * 51);
          cardValue = cards[random].value;
          const cardSuit = cards[random].suit;
          n.push(cardValue + cardSuit);

          // Function to sum numbers
          if (isNaN(cardValue)) {
            if (cardValue == "A") {
              cardValue = 1;
            } else cardValue = 10;
            s.push(cardValue);
          } else s.push(cardValue);

          if (i == 2) {
            const cardo = document.getElementById("cone");
            const cardt = document.getElementById("ctwo");
            const cardh = document.getElementById("cthree");

            cardo.src = "images/cards/" + n[0] + ".png";
            cardt.src = "images/cards/" + n[1] + ".png";
            cardh.src = "images/cards/" + n[2] + ".png";

            sum = 0;
            for (const value of s) {
              sum += +value;
            }

            console.log(sum);
            console.log(s);

            result();
          }
        }
        function result() {
          const final = sum;
          if (final < 21) {
            console.log("User won the game:  " + final);
            document.getElementById("output").innerHTML = "You are Not Busted";
          } else {
            console.log("User lost the game:  " + final);
            document.getElementById("output").innerHTML = "You are Busted";
          }
        }
      }
    </script>
  </body>
</html>
